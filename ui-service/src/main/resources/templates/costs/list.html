<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω chi ph√≠ - CarShare Manager</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link th:href="@{/css/cost-management.css}" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-car"></i>
                <span>CarShare Manager</span>
            </div>
            <nav class="nav-menu">
                <a href="/dashboard" class="nav-link">Dashboard</a>
                <a href="/costs" class="nav-link active">Chi Ph√≠</a>
                <a href="/costs/sharing" class="nav-link">Chia S·∫ª</a>
                <a href="/groups" class="nav-link">Nh√≥m</a>
                <a href="/groups/voting" class="nav-link">B·ªè Phi·∫øu</a>
                <a href="/groups/fund" class="nav-link">Qu·ªπ Chung</a>
                <a href="/reports" class="nav-link">B√°o C√°o</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <div class="page-title-section">
                <h1 class="page-title">Qu·∫£n l√Ω chi ph√≠ xe ƒëi·ªán</h1>
                <p class="page-subtitle">Theo d√µi v√† qu·∫£n l√Ω t·∫•t c·∫£ chi ph√≠ li√™n quan ƒë·∫øn xe ƒëi·ªán</p>
            </div>
            <div class="page-actions">
                <a href="/costs/create" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    <span>Th√™m chi ph√≠ m·ªõi</span>
                </a>
            </div>
        </div>

        <!-- Search and Filter -->
        <div class="search-section">
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm chi ph√≠ theo m√¥ t·∫£ ho·∫∑c ID...">
            </div>
            <div class="filter-controls">
                <select id="costTypeFilter">
                    <option value="">T·∫•t c·∫£ lo·∫°i chi ph√≠</option>
                    <option value="ElectricCharge">‚ö° S·∫°c ƒëi·ªán</option>
                    <option value="Maintenance">üîß B·∫£o d∆∞·ª°ng</option>
                    <option value="Insurance">üõ°Ô∏è B·∫£o hi·ªÉm</option>
                    <option value="Inspection">üîç Ki·ªÉm ƒë·ªãnh</option>
                    <option value="Cleaning">üßΩ V·ªá sinh</option>
                    <option value="Other">üìù Kh√°c</option>
                </select>
                <select id="vehicleFilter">
                    <option value="">T·∫•t c·∫£ xe</option>
                    <option value="1">Tesla Model 3</option>
                    <option value="2">BMW i3</option>
                </select>
            </div>
        </div>

        <!-- Cost Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon electric">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="electricCosts">0 VNƒê</div>
                    <div class="stat-label">Chi ph√≠ s·∫°c ƒëi·ªán</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon maintenance">
                    <i class="fas fa-tools"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="maintenanceCosts">0 VNƒê</div>
                    <div class="stat-label">B·∫£o d∆∞·ª°ng</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon insurance">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="insuranceCosts">0 VNƒê</div>
                    <div class="stat-label">B·∫£o hi·ªÉm</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon total">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="totalCosts">0 VNƒê</div>
                    <div class="stat-label">T·ªïng chi ph√≠</div>
                </div>
            </div>
        </div>

        <!-- Cost List -->
        <div class="costs-section">
            <div class="section-header">
                <h2 class="section-title">Danh s√°ch chi ph√≠</h2>
                <div class="view-controls">
                    <button class="view-btn active" data-view="grid">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="view-btn" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>

            <div class="costs-container" id="costsContainer">
                <div class="costs-grid" id="costsGrid">
                    <div class="cost-card" th:each="cost : ${costs}" th:data-cost-id="${cost.costId}">
                        <div class="cost-header">
                            <div class="cost-type" th:classappend="'type-' + ${cost.costType}">
                                <i th:class="'fas ' + ${#strings.replace(cost.costType, 'ElectricCharge', 'fa-bolt')} + ${#strings.replace(cost.costType, 'Maintenance', 'fa-tools')} + ${#strings.replace(cost.costType, 'Insurance', 'fa-shield-alt')} + ${#strings.replace(cost.costType, 'Inspection', 'fa-search')} + ${#strings.replace(cost.costType, 'Cleaning', 'fa-broom')} + ${#strings.replace(cost.costType, 'Other', 'fa-file-alt')}"></i>
                            </div>
                            <div class="cost-actions">
                                <button class="action-btn edit" th:onclick="'editCost(' + ${cost.costId} + ')'">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete" th:onclick="'deleteCost(' + ${cost.costId} + ')'">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="cost-body">
                            <h3 class="cost-description" th:text="${cost.description}">M√¥ t·∫£ chi ph√≠</h3>
                            <div class="cost-details">
                                <div class="cost-amount">
                                    <span class="amount" th:text="${#numbers.formatDecimal(cost.amount, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'">0 VNƒê</span>
                                </div>
                                <div class="cost-meta">
                                    <span class="vehicle-id">Xe ID: <strong th:text="${cost.vehicleId}">1</strong></span>
                                    <span class="cost-date" th:text="${#temporals.format(cost.createdAt, 'dd/MM/yyyy')}">01/01/2024</span>
                                </div>
                            </div>
                        </div>
                        <div class="cost-footer">
                            <div class="cost-type-label" th:text="${#strings.replace(cost.costType, 'ElectricCharge', 'S·∫°c ƒëi·ªán')} + ${#strings.replace(cost.costType, 'Maintenance', 'B·∫£o d∆∞·ª°ng')} + ${#strings.replace(cost.costType, 'Insurance', 'B·∫£o hi·ªÉm')} + ${#strings.replace(cost.costType, 'Inspection', 'Ki·ªÉm ƒë·ªãnh')} + ${#strings.replace(cost.costType, 'Cleaning', 'V·ªá sinh')} + ${#strings.replace(cost.costType, 'Other', 'Kh√°c')}">Lo·∫°i chi ph√≠</div>
                            <a th:href="@{'/costs/' + ${cost.costId} + '/shares'}" class="view-shares">
                                <i class="fas fa-share-alt"></i>
                                Xem chia s·∫ª
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="empty-state" th:if="${costs == null or costs.empty}">
                    <i class="fas fa-receipt"></i>
                    <h3>Ch∆∞a c√≥ chi ph√≠ n√†o</h3>
                    <p>B·∫Øt ƒë·∫ßu b·∫±ng c√°ch th√™m chi ph√≠ ƒë·∫ßu ti√™n cho xe ƒëi·ªán c·ªßa b·∫°n</p>
                    <a href="/costs/create" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        <span>Th√™m chi ph√≠ m·ªõi</span>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>X√°c nh·∫≠n x√≥a</h3>
                <button class="close-btn" onclick="closeDeleteModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a chi ph√≠ n√†y kh√¥ng?</p>
                <p class="warning">H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">H·ªßy</button>
                <button class="btn btn-danger" id="confirmDelete">X√≥a</button>
            </div>
        </div>
    </div>

    <script th:src="@{/js/cost-management.js}"></script>
</body>
</html>