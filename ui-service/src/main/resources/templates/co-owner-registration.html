<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Đăng Ký Chủ Xe Đồng Sở Hữu</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .form-section { background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #dee2e6; }
        .form-section h5 { border-bottom: 1px solid #ccc; padding-bottom: 10px; margin-bottom: 15px; }
        .upload-area { border: 2px dashed #007bff; padding: 20px; text-align: center; cursor: pointer; background-color: #fff; }
        .upload-area:hover { background-color: #e9ecef; }
        .text-danger { color: #dc3545; font-size: 0.875em; }
        .alert { margin-top: 15px;}
    </style>
</head>
<body>
<nav class="navbar navbar-dark bg-primary mb-4">
    <div class="container">
        <span class="navbar-brand mb-0 h1">Đăng Ký Chủ Xe Đồng Sở Hữu</span>
    </div>
</nav>

<div class="container">
    <p class="text-muted">Vui lòng điền đầy đủ thông tin để hoàn tất đăng ký.</p>

    <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>
    <div th:if="${param.success}" class="alert alert-success">Đăng ký thông tin thành công!</div>


    <form th:action="@{/dang-ky-chu-xe}" th:object="${coOwnerDto}" method="post" enctype="multipart/form-data">

        <div class="form-section">
            <h5><i class="fas fa-user mr-2"></i>Thông Tin Cá Nhân</h5>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="fullName">Họ và Tên *</label>
                    <input type="text" id="fullName" class="form-control" th:field="*{fullName}" placeholder="Nhập họ và tên">
                    <small th:if="${#fields.hasErrors('fullName')}" th:errors="*{fullName}" class="text-danger"></small>
                </div>
                <div class="form-group col-md-6">
                    <label for="phoneNumber">Số Điện Thoại *</label>
                    <input type="tel" id="phoneNumber" class="form-control" th:field="*{phoneNumber}" placeholder="Nhập số điện thoại">
                    <small th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}" class="text-danger"></small>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="email">Email *</label>
                    <input type="email" id="email" class="form-control" th:field="*{email}" placeholder="Nhập email">
                    <small th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="text-danger"></small>
                </div>
                <div class="form-group col-md-6">
                    <label for="dateOfBirth">Ngày Sinh *</label>
                    <input type="date" id="dateOfBirth" class="form-control" th:field="*{dateOfBirth}">
                    <small th:if="${#fields.hasErrors('dateOfBirth')}" th:errors="*{dateOfBirth}" class="text-danger"></small>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h5><i class="fas fa-id-card mr-2"></i>Giấy Tờ Tùy Thân</h5>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="idCardNumber">Số CMND/CCCD *</label>
                    <input type="text" id="idCardNumber" class="form-control" th:field="*{idCardNumber}" placeholder="Nhập số CMND/CCCD">
                    <small th:if="${#fields.hasErrors('idCardNumber')}" th:errors="*{idCardNumber}" class="text-danger"></small>
                </div>
                <div class="form-group col-md-6">
                    <label for="idCardIssueDate">Ngày Cấp *</label>
                    <input type="date" id="idCardIssueDate" class="form-control" th:field="*{idCardIssueDate}">
                    <small th:if="${#fields.hasErrors('idCardIssueDate')}" th:errors="*{idCardIssueDate}" class="text-danger"></small>
                </div>
            </div>
            <div class="form-group">
                <label for="idCardIssuePlace">Nơi Cấp *</label>
                <input type="text" id="idCardIssuePlace" class="form-control" th:field="*{idCardIssuePlace}" placeholder="Nhập nơi cấp">
                <small th:if="${#fields.hasErrors('idCardIssuePlace')}" th:errors="*{idCardIssuePlace}" class="text-danger"></small>
            </div>
        </div>

        <div class="form-section">
            <h5><i class="fas fa-address-card mr-2"></i>Giấy Phép Lái Xe</h5>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="licenseNumber">Số Giấy Phép *</label>
                    <input type="text" id="licenseNumber" class="form-control" th:field="*{licenseNumber}" placeholder="Nhập số giấy phép lái xe">
                    <small th:if="${#fields.hasErrors('licenseNumber')}" th:errors="*{licenseNumber}" class="text-danger"></small>
                </div>
                <div class="form-group col-md-6">
                    <label for="licenseClass">Hạng Giấy Phép *</label>
                    <select id="licenseClass" class="form-control" th:field="*{licenseClass}">
                        <option value="">-- Chọn hạng giấy phép --</option>
                        <option value="A1">A1</option>
                        <option value="A2">A2</option>
                        <option value="B1">B1</option>
                        <option value="B2">B2</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                    </select>
                    <small th:if="${#fields.hasErrors('licenseClass')}" th:errors="*{licenseClass}" class="text-danger"></small>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="licenseIssueDate">Ngày Cấp *</label>
                    <input type="date" id="licenseIssueDate" class="form-control" th:field="*{licenseIssueDate}">
                    <small th:if="${#fields.hasErrors('licenseIssueDate')}" th:errors="*{licenseIssueDate}" class="text-danger"></small>
                </div>
                <div class="form-group col-md-6">
                    <label for="licenseExpiryDate">Ngày Hết Hạn *</label>
                    <input type="date" id="licenseExpiryDate" class="form-control" th:field="*{licenseExpiryDate}">
                    <small th:if="${#fields.hasErrors('licenseExpiryDate')}" th:errors="*{licenseExpiryDate}" class="text-danger"></small>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h5><i class="fas fa-upload mr-2"></i>Tải Lên Giấy Tờ</h5>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="idCardFront">Ảnh CMND/CCCD (Mặt trước)</label>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="idCardFront" name="idCardFront" accept="image/*">
                        <label class="custom-file-label" for="idCardFront">Chọn file...</label>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="idCardBack">Ảnh CMND/CCCD (Mặt sau)</label>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="idCardBack" name="idCardBack" accept="image/*">
                        <label class="custom-file-label" for="idCardBack">Chọn file...</label>
                    </div>
                </div>
            </div>
            <div class="form-row mt-3">
                <div class="form-group col-md-6">
                    <label for="licenseImage">Ảnh Giấy Phép Lái Xe</label>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="licenseImage" name="licenseImage" accept="image/*">
                        <label class="custom-file-label" for="licenseImage">Chọn file...</label>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="portraitImage">Ảnh Chân Dung</label>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="portraitImage" name="portraitImage" accept="image/*">
                        <label class="custom-file-label" for="portraitImage">Chọn file...</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group form-check bg-light p-3 rounded border">
            <input type="checkbox" class="form-check-input" id="agreeToTerms" th:field="*{agreeToTerms}">
            <label class="form-check-label" for="agreeToTerms">
                Tôi đồng ý với các <a href="#">điều khoản và điều kiện</a>. Bằng cách đăng ký, bạn đồng ý với các điều khoản sử dụng và chính sách bảo mật của chúng tôi.
            </label>
            <div th:if="${#fields.hasErrors('agreeToTerms')}" class="text-danger mt-1">
                <small th:errors="*{agreeToTerms}"></small>
            </div>
        </div>

        <div class="text-right mb-4">
            <a th:href="@{/}" class="btn btn-secondary mr-2">Hủy</a>
            <button type="submit" class="btn btn-primary">Đăng Ký</button>
        </div>
    </form>
</div>

<footer class="text-center mt-5 mb-3 text-muted">
    <p>&copy; <span th:text="${#dates.year(#dates.createNow())}">2025</span> CarShare. All rights reserved.</p>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $('.custom-file-input').on('change', function(event) {
        var inputFile = event.target;
        var fileName = inputFile.files[0].name;
        $(inputFile).next('.custom-file-label').html(fileName);
    });
</script>
</body>
</html>